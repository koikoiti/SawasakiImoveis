<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/jasny.bootstrap/extend/css/jasny-bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/bootstrap-colorpicker/dist/css/bootstrap-colorpicker.min.css">
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/bootstrap.switch/bootstrap-switch.min.css" />
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/bootstrap.datetimepicker/css/bootstrap-datetimepicker.min.css" />
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/jquery.select2/select2.css" />
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/bootstrap.slider/css/slider.css" />
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/jquery.icheck/skins/flat/green.css">
<link rel="stylesheet" type="text/css" href="<%URLPADRAO%>html/js/bootstrap.daterangepicker/daterangepicker-bs3.css" />
<div class="header">
    <h3><%TITULO%></h3>
</div>
<div class="content">
    <div class="col-md-6">
    
        <div class="form-group">
            <label class="col-sm-3 control-label form-margin">*Referência</label>
            <div class="col-sm-6">
                <input autofocus required type="text" class="form-control" name="referencia" value="<%REFERENCIA%>">
            </div>
        </div>
        
        <div class="form-group">
            <label class="col-sm-3 control-label form-margin">*Angariador</label>
            <div class="col-sm-6">
                <input required type="text" class="form-control" name="angariador" value="<%ANGARIADOR%>">
            </div>
        </div>
        
        <div class="form-group form-margin">
            <label class="col-sm-3 control-label">*Categoria</label>
            <div class="col-sm-6">
                <%SELECTCATEGORIAS%>
            </div>
        </div>
        
        <div class="form-group">
            <label class="col-sm-3 control-label form-margin">CEP</label>
            <div class="col-sm-6">
                <input type="text" class="form-control cep" name="cep" onblur="buscaCep(this.value)" value="<%CEP%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label class="col-sm-3 control-label form-margin">Endereço</label>
            <div class="col-sm-6">
                <input type="text" id="endereco" class="form-control" name="endereco" value="<%ENDERECO%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label class="col-sm-3 control-label form-margin">Número</label>
            <div class="col-sm-6">
                <input type="text" id="numero" class="form-control" name="numero" value="<%NUMERO%>">
            </div>
        </div>

        <div class="form-group" style="width: 50%; float: left">
            <label class="col-sm-3 control-label form-margin">Bairro</label>
            <div class="col-sm-6">
                <input type="text" id="bairro" class="form-control" name="bairro" value="<%BAIRRO%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 25%; float: left">
            <label class="col-sm-3 control-label form-margin">Cidade</label>
            <div class="col-sm-6">
                <input type="text" id="cidade" class="form-control" name="cidade" value="<%CIDADE%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 25%; float: left">
            <label class="col-sm-3 control-label form-margin">Estado</label>
            <div class="col-sm-6">
                <input maxlength="2" onblur="maiusc(this);" type="text" id="estado" class="form-control" name="estado" value="<%ESTADO%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label class="col-sm-3 control-label form-margin">Complemento</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="complemento" value="<%COMPLEMENTO%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Ponto de Referência</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="ponto_referencia" value="<%PONTOREFERENCIA%>">
            </div>
        </div>
        
        <div class="form-group">
            <label class="col-sm-3 control-label form-margin">Entre Ruas</label>
            <div class="col-sm-6">
              <textarea class="form-control" style="margin-bottom:30px; height:60px; max-width: 100%;" name="entre_ruas"><%ENTRERUAS%></textarea>
            </div>
       </div>

        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Área Útil</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="area_util" value="<%AREAUTIL%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Área Total</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="area_total" value="<%AREATOTAL%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Proprietário</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="proprietario" value="<%PROPRIETARIO%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Telefone</label>
            <div class="col-sm-6">
                <input placeholder="(##) ####-####9 / (##) ####-####9 / (##) ####-####9" type="text" class="form-control telefone" name="telefone" value="<%TELEFONE%>">
            </div>
        </div>

        <div class="form-group" style="width: 25%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Dormitórios</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="dormitorios" value="<%DORMITORIOS%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 25%; float: left">
            <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBSUITE%> type="checkbox" id="suite" class="form-control" name="suite" style="width: 16px; height: 16px; float: left;">&nbsp;Suíte</label>
            <div class="col-sm-6">
                <input type="text" id="quantidade_suite" class="form-control" name="quantidade_suite" style="visibility: <%VBSUITE%>;" value="<%QUANTIDADESUITE%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Garagem</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="garagem" value="<%GARAGEM%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Sala</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="sala" value="<%SALA%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Churrasqueira</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="churrasqueira" value="<%CHURRASQUEIRA%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Piso</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="piso" value="<%PISO%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Esquadrias</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="esquadrias" value="<%ESQUADRIAS%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="width: 100%;" class="col-sm-3 control-label form-margin">Idade</label>
            <div class="col-sm-6">
                <input type="text" class="form-control" name="idade" value="<%IDADE%>">
            </div>
        </div>
        
        <div class="form-group" style="width: 50%; float: left">
            <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBAVERBADA%> type="checkbox" id="cbaverbada" class="form-control" name="cbaverbada" style="width: 16px; height: 16px; float: left;">&nbsp;Averbada</label>
            <div class="col-sm-6">
                <input type="text" id="averbada" class="form-control" name="averbada" style="visibility: <%VBAVERBADA%>;" value="<%AVERBADA%>">
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label form-margin">*Valor</label>
            <div class="col-sm-6">
                <input required type="text" class="form-control money" name="valor" value="<%VALOR%>">
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-3 control-label form-margin">Descrição (Site)</label>
            <div class="col-sm-6">
              <textarea class="form-control" style="margin-bottom:30px; height:150px; max-width: 100%;" name="descricao"><%DESCRICAO%></textarea>
            </div>
       </div>
       
       <div class="form-group">
            <label class="col-sm-3 control-label form-margin">Informações (Ficha)</label>
            <div class="col-sm-6">
              <textarea class="form-control" style="margin-bottom:30px; height:150px; max-width: 100%;" name="informacoes"><%INFORMACOES%></textarea>
            </div>
       </div>
    </div>
    <div class="col-md-6">
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBCOPA%> type="checkbox" class="form-control" name="copa" style="width: 16px; height: 16px; float: left;">&nbsp;Copa</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBCOZINHA%> type="checkbox" class="form-control" name="cozinha" style="width: 16px; height: 16px; float: left;">&nbsp;Cozinha</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBLAVABO%> type="checkbox" class="form-control" name="lavabo" style="width: 16px; height: 16px; float: left;">&nbsp;Lavabo</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBLAVANDERIA%> type="checkbox" class="form-control" name="lavanderia" style="width: 16px; height: 16px; float: left;">&nbsp;Lavanderia</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBCLOSET%> type="checkbox" class="form-control" name="closet" style="width: 16px; height: 16px; float: left;">&nbsp;Closet</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBHIDROMASSAGEM%> type="checkbox" class="form-control" name="hidromassagem" style="width: 16px; height: 16px; float: left;">&nbsp;Hidromassagem</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBBWCSOCIAL%> type="checkbox" class="form-control" name="bwc_social" style="width: 16px; height: 16px; float: left;">&nbsp;BWC Social</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBLAREIRA%> type="checkbox" class="form-control" name="lareira" style="width: 16px; height: 16px; float: left;">&nbsp;Lareira</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBATICO%> type="checkbox" class="form-control" name="atico" style="width: 16px; height: 16px; float: left;">&nbsp;Ático</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBARMARIOS%> type="checkbox" class="form-control" name="armarios" style="width: 16px; height: 16px; float: left;">&nbsp;Armários</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBSACADA%> type="checkbox" class="form-control" name="sacada" style="width: 16px; height: 16px; float: left;">&nbsp;Sacada</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBESCRITORIO%> type="checkbox" class="form-control" name="escritorio" style="width: 16px; height: 16px; float: left;">&nbsp;Escritório</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBDEPEMPREGADA%> type="checkbox" class="form-control" name="dep_empregada" style="width: 16px; height: 16px; float: left;">&nbsp;Dep Empregada</label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBPLAYGROUND%> type="checkbox" class="form-control" name="playground" style="width: 16px; height: 16px; float: left;">&nbsp;Playground</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBSALAOFESTAS%> type="checkbox" class="form-control" name="salao_festas" style="width: 16px; height: 16px; float: left;">&nbsp;Salão de Festas</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBPISCINA%> type="checkbox" class="form-control" name="piscina" style="width: 16px; height: 16px; float: left;">&nbsp;Piscina</label>
            </div>
        </div>
        
        <div class="form-group">
            <div class="col-sm-6">
                <label style="float: left; width: 50%;" class="col-sm-3 control-label form-margin"><input <%CBPORTAOELETRONICO%> type="checkbox" class="form-control" name="portao_eletronico" style="width: 16px; height: 16px; float: left;">&nbsp;Portão Eletrônico</label>
            </div>
        </div>
    </div>
    <div class="col-md-6" style="width: 100%;">
        <div class="form-group">
            <div class="col-sm-3" style="width: 100%;">
                <input id="files" <%REQUIREFOTO%> name="imagens[]" multiple type="file" class="filestyle" data-buttonText="Selecionar Imagens" data-input="false" accept="image/png, image/jpg, image/gif, image/jpeg" data-badge="false"/>
            </div>
        </div>
        <div id="sortable" class="sectionFoto group"><%IMAGENS%></div>
      <div class="form-group">
            <div class="col-sm-6 form-margin">
                <input type="hidden" name="imgOrder" id="imgOrder" value="<%HIDDEN%>" />
                <button onclick="return verificaFotos()" style="box-shadow: none;background-color: #19b698;border-color: transparent;border-color: #CCCCCC;border-radius: 0;-webkit-border-radius: 0;outline: none;margin-bottom: 5px;margin-left: 3px;font-size: 13px;padding: 7px 11px;" type="submit" class="btn btn-success btn-flat">
                    <i class="fa fa-check"></i> Salvar
                </button>
                <%BOTAOVOLTAR%>
                <%BOTAOATIVARINATIVAR%>
                <%BOTAOEXCLUIR%>
           </div>
       </div>
    </div>
</div>
<input type="hidden" name="acao" value="acao" />
<script type="text/javascript">
$(function() {
    $('.cep').mask('00000-000');
    $('.money').mask("#.##0,00", {reverse: true, maxlength: false});
    $('.telefone').mask('(00) 0000-00009 / (00) 0000-00009 / (00) 0000-00009');
    
    $('#cbaverbada').on('change', function(){
        if($("#cbaverbada").is(':checked')){
            $("#averbada").css('visibility', 'visible');  // checked
        }else{
            $("#averbada").css('visibility', 'hidden');
        }
    });
    
    $('#suite').on('change', function(){
        if($("#suite").is(':checked')){
            $("#quantidade_suite").css('visibility', 'visible');  // checked
        }else{
            $("#quantidade_suite").css('visibility', 'hidden');
        }
    });
});
</script>
<script type="text/javascript">
function voltar(){
    location.href = "<%URLPADRAO%>lista-imovel";
}

function ativar(idimovel){
    location.href = "<%URLPADRAO%>imovel/ativar/" + idimovel;
}

function inativar(idimovel){
    location.href = "<%URLPADRAO%>imovel/inativar/" + idimovel;
}

function buscaCep(cep){
    if(cep.length == 9){
		$.post("<%URLPADRAO%>lib/ajax/buscacep.php",
 				{cep: cep},
 				function(dados){
 					if(dados){
 						if(dados == "NOTFOUND"){
 							alert("CEP não encontrado na base de dados dos Correios!");
 						}else{
 							//Encontrou o CEP...tratar o retorno
 							var aux = dados.split("|");
 							
 							$('#endereco').val(aux[0]);
 							$('#bairro').val(aux[1]);
                            var cidadeestado = aux[2].split("/");
 							$('#cidade').val(cidadeestado[0]);
                            $('#estado').val(cidadeestado[1]);
 						}
					}
				}
    	);
	}
}
</script>
<script type="text/javascript">
/* Multifiles */
var selDiv = "";
var storedFiles = [];

$(document).ready(function() {
	$("#files").on("change", handleFileSelect);
	
	selDiv = $("#sortable"); 
	//$("#myForm").on("submit", handleForm);
	
	$("body").on("click", ".upRemove", removeFile);
});

function handleFileSelect(e) {
	var files = e.target.files;
	var filesArr = Array.prototype.slice.call(files);
	filesArr.forEach(function(f) {			
		if(!f.type.match("image.*")) {
			return;
		}
        
		storedFiles.push(f);
        
		var reader = new FileReader();
		reader.onload = function (e) {
            var html = "<div id='i="+f.name+"' class='colFoto span_1_of_5'><div style='height: 12.6em;'><img class='img-responsive' style='max-height: 100%;display: block; margin-left: auto; margin-right: auto;' src=\"" + e.target.result + "\" data-file='"+f.name+"'/></div><button type='button' style='width: 100%; padding: 1px; margin: 1px 0;' class='btn btn-danger upRemove'>Remover</button></div>";
			selDiv.append(html);
			var sorted = $('#sortable').sortable( "serialize", { expression: (/(.+)[=](.+)/) } );
			$("#imgOrder").val(sorted);
		}
		reader.readAsDataURL(f);
	});	
}

function removeFile(e) {
	var file = $(this).data("file");
	for(var i=0;i<storedFiles.length;i++) {
		if(storedFiles[i].name === file) {
			storedFiles.splice(i,1);
			break;
		}
	}
	$(this).parent().remove();
	var sorted = $('#sortable').sortable( "serialize", { expression: (/(.+)[=](.+)/) } );
	$("#imgOrder").val(sorted);
}
</script>
<script type="text/javascript">
    function excluir(id){
        if(confirm("Tem certeza que deseja excluir este imóvel?")){
            location.href = "<%URLPADRAO%>imovel/remover/" + id;
        }
    }
    
    function removeFotoImovel(idimagemimovel, idimovel){
        if(confirm("Deseja remover a imagem desse imóvel?")){
            $.post("<%URLPADRAO%>lib/ajax/removeFotoImovel.php",
    			{idimagemimovel:idimagemimovel, idimovel:idimovel},
    			function(retorno){
				    if(retorno == 1){
				        console.log(retorno);
						var element = document.getElementById("i=%"+idimagemimovel);
						element.parentNode.removeChild(element);
						var sorted = $('#sortable').sortable( "serialize", { expression: (/(.+)[=](.+)/) } );
						$("#imgOrder").val(sorted);
					}else if(retorno == 9){
						alert('Ocorreu um erro com o banco de dados. Tente novamente.');
					}
    			}
    		);
        }
    }
    
    function maiusc(e){
        e.value = e.value.toUpperCase();
    }
    
    function verificaFotos(){
	   var hidden = $("#imgOrder").val();
    	if(hidden.length < 1){
    		alert("É necessário pelo menos uma foto!!");
    		return false;
    	}else{
    		return true;
    	}
    }
</script>
<script type="text/javascript">
$(function(){
	$("#sortable").sortable();
	$("#sortable").disableSelection();
	$("#sortable").sortable({
		stop: function(e, ui){
			var sorted = $('#sortable').sortable( "serialize", { expression: (/(.+)[=](.+)/) } );
			$("#imgOrder").val(sorted);
		}
	});
});
</script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/jasny.bootstrap/extend/js/jasny-bootstrap.min.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap.daterangepicker/moment.min.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap.daterangepicker/daterangepicker.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap.touchspin/bootstrap-touchspin/bootstrap.touchspin.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap.switch/bootstrap-switch.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap.datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/jquery.select2/select2.min.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/bootstrap.slider/js/bootstrap-slider.js"></script>
    <script type="text/javascript" src="<%URLPADRAO%>html/js/jquery.icheck/icheck.min.js"></script>
<style>
/*  SECTIONS  */
.sectionFoto {
	clear: both;
	padding: 0px;
	margin: 10px 0 0 0;
}

/*  COLUMN SETUP  */
.colFoto {
	display: block;
	float:left;
	margin: 0 0 1% 1.2%;
	padding: 3px;
	border-radius: 5px;
	border: 1px solid black;
	background: rgb(240, 240, 233);
	height: 15em;
}
.colFoto:first-child { margin-left: 1.2%; }

/*  GROUPING  */
.group:before,
.group:after { content:""; display:table; }
.group:after { clear:both;}
.group { zoom:1; /* For IE 6/7 */ }
/*  GRID OF FIVE  */
.span_5_of_5 {
	width: 100%;
}
.span_4_of_5 {
	width: 79.68%;
}
.span_3_of_5 {
	width: 59.36%;
}
.span_2_of_5 {
	width: 39.04%;
}
.span_1_of_5 {
	width: 18.72%;
	position: relative;
	display: inline-block;
	margin-bottom: 2em;
}
/*.span_1_of_5:after {
    content: '';
    display: block;
    margin-top: 75%;
}*/


/*  GO FULL WIDTH BELOW 480 PIXELS */
@media only screen and (max-width: 480px) {
	.colFoto { margin: 1% 0 1% 0%; background: rgb(240, 240, 233); }
	.span_1_of_5, .span_2_of_5, .span_3_of_5, .span_4_of_5, .span_5_of_5 { width: 100%; }
	.colFoto:first-child { margin-left: 0; }
}
</style>